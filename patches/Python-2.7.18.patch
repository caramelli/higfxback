# This file is part of HiGFXback

REQUIRES="autotools-wrappers-ac-build expat-build"

pkg-config --exists --print-errors $REQUIRES || exit 1

# configure (ac-2.69)
autoconf; autoheader
./configure --enable-shared --with-system-expat --prefix=/

# build
make

# install
install -d $DESTDIR/bin
install python $DESTDIR/bin/python2.7
ln -sf python2.7 $DESTDIR/bin/python2
install -d $DESTDIR/include/python2.7
install -m 644 pyconfig.h $DESTDIR/include/python2.7
install -m 644 Include/abstract.h $DESTDIR/include/python2.7
install -m 644 Include/boolobject.h $DESTDIR/include/python2.7
install -m 644 Include/bufferobject.h $DESTDIR/include/python2.7
install -m 644 Include/bytearrayobject.h $DESTDIR/include/python2.7
install -m 644 Include/bytesobject.h $DESTDIR/include/python2.7
install -m 644 Include/cellobject.h $DESTDIR/include/python2.7
install -m 644 Include/ceval.h $DESTDIR/include/python2.7
install -m 644 Include/classobject.h $DESTDIR/include/python2.7
install -m 644 Include/cobject.h $DESTDIR/include/python2.7
install -m 644 Include/code.h $DESTDIR/include/python2.7
install -m 644 Include/codecs.h $DESTDIR/include/python2.7
install -m 644 Include/compile.h $DESTDIR/include/python2.7
install -m 644 Include/complexobject.h $DESTDIR/include/python2.7
install -m 644 Include/descrobject.h $DESTDIR/include/python2.7
install -m 644 Include/dictobject.h $DESTDIR/include/python2.7
install -m 644 Include/dtoa.h $DESTDIR/include/python2.7
install -m 644 Include/enumobject.h $DESTDIR/include/python2.7
install -m 644 Include/eval.h $DESTDIR/include/python2.7
install -m 644 Include/fileobject.h $DESTDIR/include/python2.7
install -m 644 Include/floatobject.h $DESTDIR/include/python2.7
install -m 644 Include/funcobject.h $DESTDIR/include/python2.7
install -m 644 Include/genobject.h $DESTDIR/include/python2.7
install -m 644 Include/import.h $DESTDIR/include/python2.7
install -m 644 Include/intobject.h $DESTDIR/include/python2.7
install -m 644 Include/intrcheck.h $DESTDIR/include/python2.7
install -m 644 Include/iterobject.h $DESTDIR/include/python2.7
install -m 644 Include/listobject.h $DESTDIR/include/python2.7
install -m 644 Include/longobject.h $DESTDIR/include/python2.7
install -m 644 Include/memoryobject.h $DESTDIR/include/python2.7
install -m 644 Include/methodobject.h $DESTDIR/include/python2.7
install -m 644 Include/modsupport.h $DESTDIR/include/python2.7
install -m 644 Include/moduleobject.h $DESTDIR/include/python2.7
install -m 644 Include/object.h $DESTDIR/include/python2.7
install -m 644 Include/objimpl.h $DESTDIR/include/python2.7
install -m 644 Include/patchlevel.h $DESTDIR/include/python2.7
install -m 644 Include/pyarena.h $DESTDIR/include/python2.7
install -m 644 Include/pycapsule.h $DESTDIR/include/python2.7
install -m 644 Include/pyctype.h $DESTDIR/include/python2.7
install -m 644 Include/pydebug.h $DESTDIR/include/python2.7
install -m 644 Include/pyerrors.h $DESTDIR/include/python2.7
install -m 644 Include/pyfpe.h $DESTDIR/include/python2.7
install -m 644 Include/pymacconfig.h $DESTDIR/include/python2.7
install -m 644 Include/pymath.h $DESTDIR/include/python2.7
install -m 644 Include/pymem.h $DESTDIR/include/python2.7
install -m 644 Include/pyport.h $DESTDIR/include/python2.7
install -m 644 Include/pystate.h $DESTDIR/include/python2.7
install -m 644 Include/pystrcmp.h $DESTDIR/include/python2.7
install -m 644 Include/pystrtod.h $DESTDIR/include/python2.7
install -m 644 Include/Python.h $DESTDIR/include/python2.7
install -m 644 Include/pythonrun.h $DESTDIR/include/python2.7
install -m 644 Include/rangeobject.h $DESTDIR/include/python2.7
install -m 644 Include/setobject.h $DESTDIR/include/python2.7
install -m 644 Include/sliceobject.h $DESTDIR/include/python2.7
install -m 644 Include/stringobject.h $DESTDIR/include/python2.7
install -m 644 Include/sysmodule.h $DESTDIR/include/python2.7
install -m 644 Include/traceback.h $DESTDIR/include/python2.7
install -m 644 Include/tupleobject.h $DESTDIR/include/python2.7
install -m 644 Include/unicodeobject.h $DESTDIR/include/python2.7
install -m 644 Include/warnings.h $DESTDIR/include/python2.7
install -m 644 Include/weakrefobject.h $DESTDIR/include/python2.7
install -d $DESTDIR/lib
install libpython2.7.so.1.0 $DESTDIR/lib
ln -sf libpython2.7.so.1.0 $DESTDIR/lib/libpython2.7.so
install -d $DESTDIR/lib/pkgconfig
install -m 644 Misc/python.pc $DESTDIR/lib/pkgconfig/python2.pc
install -d $DESTDIR/lib/python2.7
install -m 644 `cat pybuilddir.txt`/_sysconfigdata.py $DESTDIR/lib/python2.7
install -m 644 Lib/__future__.py $DESTDIR/lib/python2.7
install -m 644 Lib/_weakrefset.py $DESTDIR/lib/python2.7
install -m 644 Lib/_abcoll.py $DESTDIR/lib/python2.7
install -m 644 Lib/abc.py $DESTDIR/lib/python2.7
install -m 644 Lib/argparse.py $DESTDIR/lib/python2.7
install -m 644 Lib/base64.py $DESTDIR/lib/python2.7
install -m 644 Lib/codecs.py $DESTDIR/lib/python2.7
install -m 644 Lib/collections.py $DESTDIR/lib/python2.7
install -m 644 Lib/copy.py $DESTDIR/lib/python2.7
install -m 644 Lib/copy_reg.py $DESTDIR/lib/python2.7
install -m 644 Lib/fnmatch.py $DESTDIR/lib/python2.7
install -m 644 Lib/functools.py $DESTDIR/lib/python2.7
install -m 644 Lib/genericpath.py $DESTDIR/lib/python2.7
install -m 644 Lib/getopt.py $DESTDIR/lib/python2.7
install -m 644 Lib/gettext.py $DESTDIR/lib/python2.7
install -m 644 Lib/glob.py $DESTDIR/lib/python2.7
install -m 644 Lib/heapq.py $DESTDIR/lib/python2.7
install -m 644 Lib/io.py $DESTDIR/lib/python2.7
install -m 644 Lib/keyword.py $DESTDIR/lib/python2.7
install -m 644 Lib/linecache.py $DESTDIR/lib/python2.7
install -m 644 Lib/locale.py $DESTDIR/lib/python2.7
install -m 644 Lib/optparse.py $DESTDIR/lib/python2.7
install -m 644 Lib/os.py $DESTDIR/lib/python2.7
install -m 644 Lib/pickle.py $DESTDIR/lib/python2.7
install -m 644 Lib/posixpath.py $DESTDIR/lib/python2.7
install -m 644 Lib/py_compile.py $DESTDIR/lib/python2.7
install -m 644 Lib/re.py $DESTDIR/lib/python2.7
install -m 644 Lib/site.py $DESTDIR/lib/python2.7
install -m 644 Lib/socket.py $DESTDIR/lib/python2.7
install -m 644 Lib/sre_compile.py $DESTDIR/lib/python2.7
install -m 644 Lib/sre_constants.py $DESTDIR/lib/python2.7
install -m 644 Lib/sre_parse.py $DESTDIR/lib/python2.7
install -m 644 Lib/stat.py $DESTDIR/lib/python2.7
install -m 644 Lib/string.py $DESTDIR/lib/python2.7
install -m 644 Lib/StringIO.py $DESTDIR/lib/python2.7
install -m 644 Lib/struct.py $DESTDIR/lib/python2.7
install -m 644 Lib/subprocess.py $DESTDIR/lib/python2.7
install -m 644 Lib/sysconfig.py $DESTDIR/lib/python2.7
install -m 644 Lib/textwrap.py $DESTDIR/lib/python2.7
install -m 644 Lib/traceback.py $DESTDIR/lib/python2.7
install -m 644 Lib/types.py $DESTDIR/lib/python2.7
install -m 644 Lib/urllib.py $DESTDIR/lib/python2.7
install -m 644 Lib/urlparse.py $DESTDIR/lib/python2.7
install -m 644 Lib/UserDict.py $DESTDIR/lib/python2.7
install -m 644 Lib/warnings.py $DESTDIR/lib/python2.7
install -m 644 Lib/weakref.py $DESTDIR/lib/python2.7
install -d $DESTDIR/lib/python2.7/encodings
install -m 644 Lib/encodings/__init__.py $DESTDIR/lib/python2.7/encodings
install -m 644 Lib/encodings/aliases.py $DESTDIR/lib/python2.7/encodings
install -m 644 Lib/encodings/ascii.py $DESTDIR/lib/python2.7/encodings
install -d $DESTDIR/lib/python2.7/lib-dynload
install `cat pybuilddir.txt`/_collections.so $DESTDIR/lib/python2.7/lib-dynload
install `cat pybuilddir.txt`/_elementtree.so $DESTDIR/lib/python2.7/lib-dynload
install `cat pybuilddir.txt`/_functools.so $DESTDIR/lib/python2.7/lib-dynload
install `cat pybuilddir.txt`/_io.so $DESTDIR/lib/python2.7/lib-dynload
install `cat pybuilddir.txt`/_socket.so $DESTDIR/lib/python2.7/lib-dynload
install `cat pybuilddir.txt`/_struct.so $DESTDIR/lib/python2.7/lib-dynload
install `cat pybuilddir.txt`/binascii.so $DESTDIR/lib/python2.7/lib-dynload
install `cat pybuilddir.txt`/fcntl.so $DESTDIR/lib/python2.7/lib-dynload
install `cat pybuilddir.txt`/itertools.so $DESTDIR/lib/python2.7/lib-dynload
install `cat pybuilddir.txt`/math.so $DESTDIR/lib/python2.7/lib-dynload
install `cat pybuilddir.txt`/operator.so $DESTDIR/lib/python2.7/lib-dynload
install `cat pybuilddir.txt`/pyexpat.so $DESTDIR/lib/python2.7/lib-dynload
install `cat pybuilddir.txt`/select.so $DESTDIR/lib/python2.7/lib-dynload
install `cat pybuilddir.txt`/time.so $DESTDIR/lib/python2.7/lib-dynload
install -d $DESTDIR/lib/python2.7/xml
install -m 644 Lib/xml/__init__.py $DESTDIR/lib/python2.7/xml
install -d $DESTDIR/lib/python2.7/xml/etree
install -m 644 Lib/xml/etree/__init__.py $DESTDIR/lib/python2.7/xml/etree
install -m 644 Lib/xml/etree/cElementTree.py $DESTDIR/lib/python2.7/xml/etree
install -m 644 Lib/xml/etree/ElementTree.py $DESTDIR/lib/python2.7/xml/etree
install -d $DESTDIR/lib/python2.7/xml/parsers
install -m 644 Lib/xml/parsers/__init__.py $DESTDIR/lib/python2.7/xml/parsers
install -m 644 Lib/xml/parsers/expat.py $DESTDIR/lib/python2.7/xml/parsers
install -d $DESTDIR/lib/python2.7/xml/sax
install -m 644 Lib/xml/sax/__init__.py $DESTDIR/lib/python2.7/xml/sax
install -m 644 Lib/xml/sax/_exceptions.py $DESTDIR/lib/python2.7/xml/sax
install -m 644 Lib/xml/sax/expatreader.py $DESTDIR/lib/python2.7/xml/sax
install -m 644 Lib/xml/sax/handler.py $DESTDIR/lib/python2.7/xml/sax
install -m 644 Lib/xml/sax/saxutils.py $DESTDIR/lib/python2.7/xml/sax
install -m 644 Lib/xml/sax/xmlreader.py $DESTDIR/lib/python2.7/xml/sax

# build.pc
install -d $DESTDIR/share/pkgconfig
cat > $DESTDIR/share/pkgconfig/python2-build.pc << EOF
Name: Python programming language
Version: 2.7.18
Description: Python
Requires: $REQUIRES

devel=\\
/include/python2.7/abstract.h \\
/include/python2.7/boolobject.h \\
/include/python2.7/bufferobject.h \\
/include/python2.7/bytearrayobject.h \\
/include/python2.7/bytesobject.h \\
/include/python2.7/cellobject.h \\
/include/python2.7/ceval.h \\
/include/python2.7/classobject.h \\
/include/python2.7/cobject.h \\
/include/python2.7/code.h \\
/include/python2.7/codecs.h \\
/include/python2.7/compile.h \\
/include/python2.7/complexobject.h \\
/include/python2.7/descrobject.h \\
/include/python2.7/dictobject.h \\
/include/python2.7/dtoa.h \\
/include/python2.7/enumobject.h \\
/include/python2.7/eval.h \\
/include/python2.7/fileobject.h \\
/include/python2.7/floatobject.h \\
/include/python2.7/funcobject.h \\
/include/python2.7/genobject.h \\
/include/python2.7/import.h \\
/include/python2.7/intobject.h \\
/include/python2.7/intrcheck.h \\
/include/python2.7/iterobject.h \\
/include/python2.7/listobject.h \\
/include/python2.7/longobject.h \\
/include/python2.7/memoryobject.h \\
/include/python2.7/methodobject.h \\
/include/python2.7/modsupport.h \\
/include/python2.7/moduleobject.h \\
/include/python2.7/object.h \\
/include/python2.7/objimpl.h \\
/include/python2.7/patchlevel.h \\
/include/python2.7/pyarena.h \\
/include/python2.7/pycapsule.h \\
/include/python2.7/pyconfig.h \\
/include/python2.7/pyctype.h \\
/include/python2.7/pydebug.h \\
/include/python2.7/pyerrors.h \\
/include/python2.7/pyfpe.h \\
/include/python2.7/pymacconfig.h \\
/include/python2.7/pymath.h \\
/include/python2.7/pymem.h \\
/include/python2.7/pyport.h \\
/include/python2.7/pystate.h \\
/include/python2.7/pystrcmp.h \\
/include/python2.7/pystrtod.h \\
/include/python2.7/Python.h \\
/include/python2.7/pythonrun.h \\
/include/python2.7/rangeobject.h \\
/include/python2.7/setobject.h \\
/include/python2.7/sliceobject.h \\
/include/python2.7/stringobject.h \\
/include/python2.7/sysmodule.h \\
/include/python2.7/traceback.h \\
/include/python2.7/tupleobject.h \\
/include/python2.7/unicodeobject.h \\
/include/python2.7/warnings.h \\
/include/python2.7/weakrefobject.h \\
/lib/libpython2.7.so \\
/lib/pkgconfig/python-2.7.pc \\
/lib/pkgconfig/python2.pc

exec=\\
/bin/python2 \\
/bin/python2.7 \\
/lib/libpython2.7.so.1.0 \\
/lib/python2.7/__future__.py \\
/lib/python2.7/_abcoll.py \\
/lib/python2.7/_sysconfigdata.py \\
/lib/python2.7/_weakrefset.py \\
/lib/python2.7/abc.py \\
/lib/python2.7/argparse.py \\
/lib/python2.7/base64.py \\
/lib/python2.7/codecs.py \\
/lib/python2.7/collections.py \\
/lib/python2.7/copy.py \\
/lib/python2.7/copy_reg.py \\
/lib/python2.7/fnmatch.py \\
/lib/python2.7/functools.py \\
/lib/python2.7/genericpath.py \\
/lib/python2.7/getopt.py \\
/lib/python2.7/gettext.py \\
/lib/python2.7/glob.py \\
/lib/python2.7/heapq.py \\
/lib/python2.7/io.py.py \\
/lib/python2.7/keyword.py \\
/lib/python2.7/linecache.py \\
/lib/python2.7/locale.py \\
/lib/python2.7/optparse.py \\
/lib/python2.7/os.py \\
/lib/python2.7/pickle.py \\
/lib/python2.7/posixpath.py \\
/lib/python2.7/py_compile.py \\
/lib/python2.7/re.py \\
/lib/python2.7/site.py \\
/lib/python2.7/socket.py \\
/lib/python2.7/sre_compile.py \\
/lib/python2.7/sre_constants.py \\
/lib/python2.7/sre_parse.py \\
/lib/python2.7/stat.py \\
/lib/python2.7/string.py \\
/lib/python2.7/StringIO.py \\
/lib/python2.7/struct.py \\
/lib/python2.7/subprocess.py \\
/lib/python2.7/sysconfig.py \\
/lib/python2.7/textwrap.py \\
/lib/python2.7/traceback.py \\
/lib/python2.7/types.py \\
/lib/python2.7/urllib.py \\
/lib/python2.7/urlparse.py \\
/lib/python2.7/UserDict.py \\
/lib/python2.7/warnings.py \\
/lib/python2.7/weakref.py \\
/lib/python2.7/encodings/__init__.py \\
/lib/python2.7/encodings/aliases.py \\
/lib/python2.7/encodings/ascii.py \\
/lib/python2.7/lib-dynload/_collections.so \\
/lib/python2.7/lib-dynload/_elementtree.so \\
/lib/python2.7/lib-dynload/_functools.so \\
/lib/python2.7/lib-dynload/_io.so \\
/lib/python2.7/lib-dynload/_socket.so \\
/lib/python2.7/lib-dynload/_struct.so \\
/lib/python2.7/lib-dynload/binascii.so \\
/lib/python2.7/lib-dynload/fcntl.so \\
/lib/python2.7/lib-dynload/itertools.so \\
/lib/python2.7/lib-dynload/math.so \\
/lib/python2.7/lib-dynload/operator.so \\
/lib/python2.7/lib-dynload/pyexpat.so \\
/lib/python2.7/lib-dynload/select.so \\
/lib/python2.7/lib-dynload/time.so \\
/lib/python2.7/xml/__init__.py \\
/lib/python2.7/xml/etree/__init__.py \\
/lib/python2.7/xml/etree/cElementTree.py \\
/lib/python2.7/xml/etree/ElementTree.py \\
/lib/python2.7/xml/parsers/__init__.py \\
/lib/python2.7/xml/parsers/expat.py \\
/lib/python2.7/xml/sax/__init__.py \\
/lib/python2.7/xml/sax/_exceptions.py \\
/lib/python2.7/xml/sax/expatreader.py \\
/lib/python2.7/xml/sax/handler.py \\
/lib/python2.7/xml/sax/saxutils.py \\
/lib/python2.7/xml/sax/xmlreader.py
EOF

exit
